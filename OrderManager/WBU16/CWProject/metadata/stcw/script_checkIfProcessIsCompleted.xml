<?xml version="1.0" encoding="UTF-8" ?>
<script name="stcw.checkIfProcessIsCompleted">
  <label>Check If Process Is Completed</label>
  <metaVersion>25</metaVersion>
  <parameterList>
    <parameter name="pid" type="rifp">
      <type>dtype_cwf_pm.PROCESS_ID</type>
    </parameter>
  </parameterList>
  <script><![CDATA[
    var processCompleted = false;

    var debug = " checkIfProcessIsCompleted - ";

    var inputDocForQuery = new Document("cwf_pm:ProcessSearch");
    inputDocForQuery.PROCESS_ID = pid;

    var processFinder = Finder.runFinder("cwf_pm:ProcessFinder", "select",  inputDocForQuery);
    if (processFinder != null && processFinder.size > 0) {
    debugPrintln(stcc.getSysdateForLog() + debug + "ProcessStatus [" + pid + "] = " + processFinder[0].STATUS);
        processCompleted = (processFinder[0].STATUS == 3 || processFinder[0].STATUS == 6);
    }
    else {
    debugPrintln(stcc.getSysdateForLog() + debug + "Unable to find Process with pid " + pid);
        processCompleted = false;
    }

    return processCompleted;
  ]]></script>
</script>