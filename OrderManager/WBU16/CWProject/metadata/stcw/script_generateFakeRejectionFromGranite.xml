<?xml version="1.0" encoding="UTF-8" ?>
<script name="stcw.generateFakeRejectionFromGranite">
  <label>Generate Fake Rejection From Granite</label>
  <metaVersion>25</metaVersion>
  <parameterList>
    <parameter name="isWholesale" type="rifp">
      <type>dtype_com.conceptwave.system.Boolean</type>
    </parameter>
    <parameter name="isSubmit" type="rifp">
      <type>dtype_com.conceptwave.system.Boolean</type>
    </parameter>
    <parameter name="orderNumber" type="rifp">
      <type>dtype_com.conceptwave.system.String</type>
    </parameter>
    <parameter name="workOrderNumber" type="rifp">
      <type>dtype_com.conceptwave.system.String</type>
    </parameter>
    <parameter name="errorCode" type="rifp">
      <type>dtype_com.conceptwave.system.String</type>
    </parameter>
    <parameter name="parameters" type="rifp">
      <type>nmeta_com.conceptwave.system.Object</type>
    </parameter>
  </parameterList>
  <script><![CDATA[
    var fakeRejection = null;

    if(isWholesale) {
        // Wholesale
        if(isSubmit) {
            fakeRejection = new DataStructure("grws.submitOrderResponse");
        }
        else {
            fakeRejection = new DataStructure("grws.updateOrderResponse");
        }
        fakeRejection.result.OrderNumber = orderNumber;
        fakeRejection.result.BusinessUnit = "Wholesale";
        fakeRejection.result.Status.Status = "ERROR";
        fakeRejection.result.Status.ErrorCode = errorCode;
        fakeRejection.result.Status.ErrorDescription = Global.translateText(errorCode, null, parameters);
        fakeRejection.result.Status.ErrorTime = stcc.getSysdateInYYYYMMDD_HH24MMSS();
        fakeRejection.result.Status.ErrorType = "FUNCTIONAL"
        fakeRejection.result.Status.SystemName = "EOC_XNG";
    }
    else {
        // Enterprise
        if(isSubmit) {
            fakeRejection = new DataStructure("cimeWS.submitOrderResponse_el");
        }
        else {
            fakeRejection = new DataStructure("cimeWS.updateOrderResponse_el");
        }
        fakeRejection.return.crmOrderNumber = orderNumber;
        fakeRejection.return.workOrderNumber = workOrderNumber;
        fakeRejection.return.status = "Rejected";
        fakeRejection.return.xngOrderNumber = workOrderNumber;
        fakeRejection.return.failure[0].errorCode = errorCode;
        fakeRejection.return.failure[0].errorDescription = Global.translateText(errorCode, null, parameters);
        fakeRejection.return.failure[0].errorTime = stcc.getSysdateInYYYYMMDD_HH24MMSS();
        fakeRejection.return.failure[0].errorType = "FUNCTIONAL"
        fakeRejection.return.failure[0].systemName = "EOC_XNG";
    }

    return fakeRejection;
  ]]></script>
</script>