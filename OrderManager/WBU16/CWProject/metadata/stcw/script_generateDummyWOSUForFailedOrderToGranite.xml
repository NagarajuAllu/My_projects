<?xml version="1.0" encoding="UTF-8" ?>
<script name="stcw.generateDummyWOSUForFailedOrderToGranite">
  <label>Generate Dummy WOSU For FailedOrder To Granite</label>
  <metaVersion>4</metaVersion>
  <parameterList>
    <parameter name="comOrderNumber" type="rifp">
      <type>dtype_com.conceptwave.system.String</type>
    </parameter>
    <parameter name="lineItemFailed" type="rifp">
      <type>doc_stcw.lineItemDocument</type>
    </parameter>
    <parameter name="businessUnit" type="rifp">
      <type>dtype_com.conceptwave.system.String</type>
    </parameter>
    <parameter name="provisioningProcessId" type="rifp">
      <type>dtype_cwf.processId</type>
    </parameter>
  </parameterList>
  <script><![CDATA[
    var wosuDS = new DataStructure("stcw.wosuUnifiedModel");
    wosuDS.workOrderName = lineItemFailed.workOrderNumber;
    wosuDS.comOrderNumber = comOrderNumber;
    wosuDS.assetNumber = lineItemFailed.serviceNumber;
    wosuDS.businessUnit = businessUnit;
    wosuDS.workOrderStatus = "FAILED";
    wosuDS.workOrderRemarks = "Dummy WOSU generated by EOC for FAILED lineItem; " + lineItemFailed.remarks;
    wosuDS.taskName = "no-info";
    wosuDS.taskNumber = "-1";
    wosuDS.taskOperation = "no-info";
    wosuDS.taskStatusCode = "FAILED";
    wosuDS.lineItemStatus = "FAILED";

    var wosuId = stcw.writeGraniteWOSUIntoDB(provisioningProcessId, wosuDS);

    var wosuNotificationDS = new DataStructure("stcw.wosuNotificationDS");
    wosuNotificationDS.wosuId = wosuId;

    debugPrintln(stcc.getSysdateForLog() + " Sending Dummy WOSU Notification to process " + provisioningProcessId + "; wosuId = " + wosuId);
    Process.sendMessageToProcess(provisioningProcessId, null, "stcw.xngServicesNotificationToProcesses/workOrderStatusUpdateNotification", wosuNotificationDS);
  ]]></script>
</script>