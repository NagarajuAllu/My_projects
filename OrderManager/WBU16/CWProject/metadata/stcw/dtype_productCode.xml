<?xml version="1.0" encoding="UTF-8" ?>
<dataType name="stcw.productCode">
  <extends>dtype_com.conceptwave.system.String</extends>
  <label>Product Code</label>
  <length>255</length>
  <metaVersion>3</metaVersion>
  <methodList>
    <method name="validateProductCodeValue" type="crule">
      <message>Product Code: Received Invalid Value</message>
      <severity>error</severity>
      <type>validator</type>
      <valueType>dtype_com.conceptwave.system.Boolean</valueType>
      <script><![CDATA[
        var found = false;

        var searchDoc = new Document("stcconf.search_ProductCodeDoc");
        searchDoc.productCode = itemData;

        var resultList = Finder.runFinder("stcconf.findAllProductCodes", "select", searchDoc);
        if(resultList != null && resultList.length > 0) {
            found = true;
        }

        return (!found);
      ]]></script>
    </method>
  </methodList>
</dataType>