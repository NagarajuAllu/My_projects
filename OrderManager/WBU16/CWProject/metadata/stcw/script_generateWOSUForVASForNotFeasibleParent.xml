<?xml version="1.0" encoding="UTF-8" ?>
<script name="stcw.generateWOSUForVASForNotFeasibleParent">
  <label>Generate WOSU For VAS For NotFeasible Parent</label>
  <metaVersion>25</metaVersion>
  <parameterList>
    <parameter name="bundleOrder" type="rifp">
      <type>order_stcw.wholesaleBundleOrderSTC</type>
    </parameter>
    <parameter name="vasLineItem" type="rifp">
      <type>doc_com.conceptwave.system.Document</type>
    </parameter>
  </parameterList>
  <script><![CDATA[
    // it generates the unified model of the last WOSU for the bundleOrder
    var wosuUnifiedModel = new DataStructure("stcw.wosuUnifiedModel");
    wosuUnifiedModel.comOrderNumber = bundleOrder.orderHeader.orderNumber;
    wosuUnifiedModel.orderStatus = bundleOrder.orderHeader.orderStatus;
    wosuUnifiedModel.businessUnit = bundleOrder.orderHeader.businessUnit;
    wosuUnifiedModel.reservationNumber = null;
    wosuUnifiedModel.feasibilityStatus = "NO-ACTION";
    wosuUnifiedModel.reservationDays = null;
    wosuUnifiedModel.actualImplementationDays = null;
    wosuUnifiedModel.plannedFeasibleDays = null;
    wosuUnifiedModel.lineItemIdentifier = vasLineItem.lineItemIdentifier;
    wosuUnifiedModel.lineItemStatus = vasLineItem.lineItemStatus;
    wosuUnifiedModel.assetNumber = null;
    wosuUnifiedModel.niNumber = null;
    wosuUnifiedModel.systemDesignation = null;
    wosuUnifiedModel.workOrderName = "no-info";
    wosuUnifiedModel.workOrderStatus = "NO-ACTION";
    wosuUnifiedModel.workOrderRemarks = null;
    wosuUnifiedModel.workOrderProblemDescription = null;
    wosuUnifiedModel.taskNumber = -1;
    wosuUnifiedModel.taskName = "no-info";
    wosuUnifiedModel.taskAllocatedTime = null;
    wosuUnifiedModel.taskDescription = null;
    wosuUnifiedModel.taskOperation = "no-info";
    wosuUnifiedModel.taskPriority = null;
    wosuUnifiedModel.taskServiceStatus = null;
    wosuUnifiedModel.taskStatusCode = -1;
    wosuUnifiedModel.taskRemarks = null;
    wosuUnifiedModel.workOrderStage = null;

    var wosuID = stcw.writeGraniteWOSUIntoDB(-1, wosuUnifiedModel);

    var processDocument = new Document("stcw.STCW_PROCESS_DOCUMENT");
    processDocument.firstPassWOSU = "Y";
    processDocument.latestWOSUId = wosuID;

    var processId = Process.startProcess ("stcw.sendWOSUToCOM", processDocument);
    debugPrintln(stcc.getSysdateForLog() + " started sendWOSUToCOM for 'WOSUForVASForNotFeasibleParent <" + bundleOrder.orderHeader.orderNumber + ">: processId = " + processId);
  ]]></script>
</script>