<?xml version="1.0" encoding="UTF-8" ?>
<script name="granitews4eoc.invokeCompleteBlockedTaskAPI">
  <label>Invoke &quot;Complete Blocked Task&quot; API</label>
  <metaVersion>25</metaVersion>
  <parameterList>
    <parameter name="sourceTaskInstId" type="rifp">
      <type>dtype_granite.INST_ID_10</type>
    </parameter>
    <parameter name="newQueueName" type="rifp">
      <type>dtype_com.conceptwave.system.String</type>
    </parameter>
    <parameter name="blockingTaskInstId" type="rifp">
      <type>dtype_granite.INST_ID_10</type>
    </parameter>
    <parameter name="userId" type="rifp">
      <type>dtype_com.conceptwave.system.String</type>
    </parameter>
    <parameter name="woName" type="rifp">
      <type>dtype_com.conceptwave.system.String</type>
    </parameter>
    <parameter name="taskName" type="rifp">
      <type>dtype_com.conceptwave.system.String</type>
    </parameter>
  </parameterList>
  <script><![CDATA[
    var debugLog = "InvokeCompleteBlockedTaskAPI";
    var resultDS =  null;

    try {
        var inputDS = new DataStructure("granitews4eoc.completeBlockedTask_el");
        inputDS.CompleteBlockedTaskInputMessage.sourceTaskInstId = sourceTaskInstId;
        inputDS.CompleteBlockedTaskInputMessage.newQueueName = newQueueName;
        inputDS.CompleteBlockedTaskInputMessage.blockingTaskInstId = blockingTaskInstId;
        inputDS.CompleteBlockedTaskInputMessage.userId = userId;

        resultDS = stcc.sendDataToInterfaceWithLogging(inputDS,
                                                       "granitews4eoc.GraniteServiceForEOCPortType",
                                                       "completeBlockedTask",
                                                       true,
                                                       null,
                                                       debugLog,
                                                       woName,
                                                       taskName);

    }
    catch(exc) {
        var errorType = "Application";

        if(exc.message.indexOf("XE0023") >= 0 || exc.message.indexOf("XE0002")) {
    debugPrintln(stcc.getSysdateForLog() + " " + debugLog + " (" + sourceTaskInstId + ", " + newQueueName + ", " + blockingTaskInstId + "): Interface Error while invoking Granite For EOC WS: " + exc.message);
            errorType = "Interface";
        }
        else {
    debugPrintln(stcc.getSysdateForLog() + " " + debugLog + " (" + sourceTaskInstId + ", " + newQueueName + ", " + blockingTaskInstId + "): Application Error while invoking Granite For EOC WS: " + exc.message);
            errorType = "Application";
        }

        resultDS = new DataStructure("granitews4eoc.completeBlockedTaskResponse_el");
        resultDS.ResultMessage.result = "ERROR";
        resultDS.ResultMessage.errorCode = "WS0001";
        resultDS.ResultMessage.errorDescription = exc.message;
    }

    debugPrintln(stcc.getSysdateForLog() + " " + debugLog + " (" + sourceTaskInstId + ", " + newQueueName + ", " + blockingTaskInstId + "): Response = " + resultDS.toXML());

    return resultDS;
  ]]></script>
</script>