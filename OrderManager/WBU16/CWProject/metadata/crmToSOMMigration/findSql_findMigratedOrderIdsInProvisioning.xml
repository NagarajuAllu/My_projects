<?xml version="1.0" encoding="UTF-8" ?>
<findSql name="crmToSOMMigration.findMigratedOrderIdsInProvisioning">
  <dbSchema>ORDER</dbSchema>
  <extends>find_com.conceptwave.system.Finder</extends>
  <label>Find Migrated Orders in Provisioning Status</label>
  <maxRowsLimit>9999</maxRowsLimit>
  <metaVersion>25</metaVersion>
  <output>doc_cwt_common.docID</output>
  <type>SQL</type>
  <volatility>1</volatility>
  <methodList>
    <method name="cwOnFinderSQLSel" type="action">
      <system>true</system>
      <script><![CDATA[
        select h.cworderid
          from stcw_bundleorder_header h, stcw_lineItem b, stcw_order_orchestration orc
         where h.ismigrated = 1
           and b.cworderid = h.cworderid
           and b.elementtypeinordertree = 'B'
           and b.provisioningFlag = 'PROVISIONING'
           and orc.cworderid = h.cworderid
        minus
        select order_id
          from cwprocess
      ]]></script>
    </method>
  </methodList>
</findSql>