<?xml version="1.0" encoding="UTF-8" ?>
<findSql name="granite.findPathChannelUtilization">
  <dbSchema>GRANITE</dbSchema>
  <extends>find_com.conceptwave.system.Finder</extends>
  <input>doc_granite.pathSearchDoc</input>
  <label>Find Path Channel Utilization</label>
  <maxRowsLimit>9999</maxRowsLimit>
  <metaVersion>25</metaVersion>
  <output>doc_granite.pathChannelUtilization</output>
  <type>SQL</type>
  <volatility>10</volatility>
  <methodList>
    <method name="cwOnFinderSQLSel" type="action">
      <system>true</system>
      <script><![CDATA[
        select chan.chan_inst_id,
               par.circ_path_hum_id,
               par.circ_path_rev_nbr,
               mem.circ_path_hum_id,
               upper(mem.status),
               nxt.circ_path_hum_id,
               upper(nxt.status)
          from circ_path_inst par,
               circ_path_inst mem,
               circ_path_inst nxt,
               path_chan_inst chan
         where chan.parent_path_inst_id = par.circ_path_inst_id
           and chan.member_path_inst_id = mem.circ_path_inst_id (+)
           and chan.next_path_inst_id   = nxt.circ_path_inst_id (+)
           and (chan.member_path_inst_id is not null or chan.next_path_inst_id is not null)
        {[1] and par.circ_path_hum_id = ?}
      ]]></script>
    </method>
  </methodList>
</findSql>