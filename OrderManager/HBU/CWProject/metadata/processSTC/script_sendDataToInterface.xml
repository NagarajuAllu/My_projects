<?xml version="1.0" encoding="UTF-8" ?>
<script filenameHash="e6f9d1278b3ef9a38c91ea8d07f9341a" versionHash="eccbc87e4b5ce2fe28308fd9f2a7baf3" name="processSTC.sendDataToInterface">
  <guid>{03311ff8-da57-aea3-f382-4a9f7689c41d}</guid>
  <label>Send Data To Interface</label>
  <metaVersion>3</metaVersion>
  <parameterList>
    <parameter name="inputData" type="rifp">
      <type>nmeta_com.conceptwave.system.Object</type>
    </parameter>
    <parameter name="interfaceName" type="rifp">
      <type>dtype_com.conceptwave.system.String</type>
    </parameter>
    <parameter name="operationName" type="rifp">
      <type>dtype_com.conceptwave.system.String</type>
    </parameter>
    <parameter name="existResult" type="rifp">
      <mandatory>true</mandatory>
      <type>dtype_com.conceptwave.system.Boolean</type>
    </parameter>
    <parameter name="processId" type="rifp">
      <type>dtype_cwf_pm.PROCESS_ID</type>
    </parameter>
    <parameter name="operationDescription" type="rifp">
      <type>dtype_com.conceptwave.system.String</type>
    </parameter>
    <parameter name="userData1ValueForLog" type="rifp">
      <type>dtype_com.conceptwave.system.String</type>
    </parameter>
    <parameter name="userData2ValueForLog" type="rifp">
      <type>dtype_com.conceptwave.system.String</type>
    </parameter>
  </parameterList>
  <script><![CDATA[
    var debugHeader = "[" + processId + "] " + operationDescription + " - ";
    var result = null;

    try {
    debugPrintln("[" + ds_ws.common_currentDateAsStringDDMMYYYYHH24MISS() + "]" + debugHeader + "Sending: " + inputData.toXML());
        var outputSOAP = Global.invokeInterface(interfaceName,
                                                operationName,
                                                inputData);

        var logMsgId = UserProfile.getMsgLogId();
    debugPrintln("[" + ds_ws.common_currentDateAsStringDDMMYYYYHH24MISS() + "]" + debugHeader + "Adding UserData_1 = " + userData1ValueForLog + " to id = " + logMsgId);

        UserProfile.setMsgLogData(userData1ValueForLog, userData2ValueForLog, null, logMsgId);

        if(existResult) {
            if(outputSOAP != null && outputSOAP.length == 1) {
                result = outputSOAP[0];

    debugPrintln("[" + ds_ws.common_currentDateAsStringDDMMYYYYHH24MISS() + "]" + debugHeader + "RESULT: " + result.toXML() + "...");
            }
        }
    }
    catch (exc){
    debugPrintln("[" + ds_ws.common_currentDateAsStringDDMMYYYYHH24MISS() + "]" + debugHeader + "EXCEPTION: " + exc.message);

        if(exc.message.indexOf("XE0023") >= 0) {
            Global.logDebug(debugHeader + "I/F " + interfaceName + ": getDelay = " + Global.getInterfaceDelay(interfaceName));
    debugPrintln("[" + ds_ws.common_currentDateAsStringDDMMYYYYHH24MISS() + "]" + debugHeader + "I/F " + interfaceName + ": getDelay = " + Global.getInterfaceDelay(interfaceName));
        }
        else if(exc.message.indexOf("XE0002") >= 0) {
            Global.logDebug(debugHeader + "I/F " + interfaceName + ": caught Interface Error XE0002");
    debugPrintln("[" + ds_ws.common_currentDateAsStringDDMMYYYYHH24MISS() + "]" + debugHeader + "I/F " + interfaceName + ": caught Interface Error XE0002");
        }

        Global.rethrowException(exc);
    }

    return result;
  ]]></script>
</script>