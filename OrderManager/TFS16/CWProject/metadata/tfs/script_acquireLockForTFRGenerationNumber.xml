<?xml version="1.0" encoding="UTF-8" ?>
<script name="tfs.acquireLockForTFRGenerationNumber">
  <label>Acquire Lock For TFR Generation Number</label>
  <metaVersion>25</metaVersion>
  <script><![CDATA[
    var acquiredLock = false;

    while(!acquiredLock) {
        try {
            var doc = new Document("tfs.STC_TFR_NUMBERGEN_LOCK");
            doc.lockAcquired = "Y";

            Global.beginTransaction("ORDER");
            doc.save();
            Global.commitTransaction("ORDER");

            acquiredLock = true;
        }
        catch(exc) {
            debugPrintln("Error in acquiring lock for TFR Number Generation ... sleeping");
            common.timeDelay(200);
        }
    }

    return;
  ]]></script>
</script>