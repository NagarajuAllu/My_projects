<?xml version="1.0" encoding="UTF-8" ?>
<script name="tfs.getNextValueForTFR">
  <label>Get Next Value For TFR</label>
  <metaVersion>4</metaVersion>
  <parameterList>
    <parameter name="tfrNumberHeader" type="rifp">
      <type>dtype_com.conceptwave.system.String</type>
    </parameter>
  </parameterList>
  <script><![CDATA[
    var finder = new Finder("tfs.getMaxSequenceValueForTFR");
    finder.searchDocument.value = tfrNumberHeader + "%";
    var resultList = finder.search();

    var foundValueString = "0000";
    if(resultList != null && resultList.length > 0) {
        if(! common.isNullValue(resultList[0].value)) {
            foundValueString = resultList[0].value;
        }
    }

    var foundValueNumber = new Number(foundValueString);
    foundValueNumber++;

    var result = new String(foundValueNumber).leftPad(4, "0");
    return result;
  ]]></script>
</script>