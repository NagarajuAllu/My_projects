<?xml version="1.0" encoding="UTF-8" ?>
<script name="tfs.isDisconnectedTFRRehomed">
  <label>Is TFR Rehomed</label>
  <metaVersion>25</metaVersion>
  <parameterList>
    <parameter name="tfrId" type="rifp">
      <mandatory>true</mandatory>
      <type>dtype_cwf.docId</type>
    </parameter>
  </parameterList>
  <script><![CDATA[
    /*
     * Script verifies if current tfr disconnects tfr from Rehome process
     */
    debugPrintln("isDisconnectedTFRRehomed()");
    debugPrintln("TFR to check:"+tfrId);

    var disconnectionTFR = Document.readDoc("tfs.tfr",tfrId);
    var disconnectedTFR = Document.readDoc("tfs.tfr", disconnectionTFR.disconnectedTFRId); // get disconnected tfr

    // find running rehoming processes for Disconnected TFR
    var resultList = workflow.findRunningProcessesByType(disconnectedTFR.cwOrderId, "workflow.rehomingOrderProcess");

    debugPrintln("Found:"+resultList.length+" Running Rehoming processes for disconnected tfr:"+disconnectedTFR.tfrId);
    debugPrintln("~isDisconnectedTFRRehomed()");

    return resultList.length>0
  ]]></script>
</script>