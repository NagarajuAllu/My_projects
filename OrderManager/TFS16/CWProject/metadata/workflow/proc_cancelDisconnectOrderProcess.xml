<?xml version="1.0" encoding="UTF-8" ?>
<process name="workflow.cancelDisconnectOrderProcess">
  <activity name="startCancelDisconnectOrderProcess" type="seqActivity">
    <label>Start Cancel Disconnect Order Process</label>
    <x>125.73935</x>
    <y>30.0</y>
    <childList>
      <child name="preSteps" type="scriptActivity">
        <label>Cancel Disconnect Presteps</label>
        <x>129.40634</x>
        <y>130.6414</y>
        <methodList>
          <method name="cwOnProcActBefore" type="action">
            <category>before</category>
            <system>true</system>
            <script><![CDATA[
              debugPrintln("Cancell Disconnect TFR process presteps ...\nComputing user.");
              workflow.suspendWorkItemsForOrder(this.process.processOrder.id, this.process.id);
              workflow.overload_computeNextUser(this.process.processOrder.id, "0", this.process.id, "cancelDisconnectOrderProcess", "cancelDisconnect");
              debugPrintln("Cancell Disconnect TFR process presteps completed.");
            ]]></script>
          </method>
        </methodList>
      </child>
      <child name="validateCancellation" type="opActivity">
        <element>iface_workflow.facilityDesignTeamIF/oper_validateDisconnectCancellation</element>
        <label>Validate Cancellation</label>
        <participant>part_workflow.facilityDesignTeamParticipant</participant>
        <x>126.0665</x>
        <y>256.74487</y>
      </child>
      <child name="validationDecision" type="choiceActivity">
        <label>Validation Decision</label>
        <x>65.0582</x>
        <y>382.8484</y>
        <childList>
          <child name="approveCancellation" type="opActivity">
            <element>iface_workflow.facilityDesignTeamIF/oper_approveDisconnectCancellation</element>
            <label>Approve Cancellation</label>
            <participant>part_workflow.facilityDesignTeamParticipant</participant>
            <x>200.74438</x>
            <y>583.9519</y>
            <childList>
              <child name="startDisconnectProcessInterruptActivities" type="seqActivity">
                <label>Start Disconnect Process Interruption Activities</label>
                <x>166.92955</x>
                <y>697.7945</y>
                <childList>
                  <child name="interruptDisconnectOrderProcess" type="scriptActivity">
                    <label>Interrupt Disconnect Order Process</label>
                    <x>168.46997</x>
                    <y>806.7566</y>
                    <methodList>
                      <method name="cwOnProcActBefore" type="action">
                        <category>before</category>
                        <system>true</system>
                        <script><![CDATA[
                          debugPrintln("Terminating Disconnect Order process...");
                          // var disconnectTFRId = this.process.processOrder.tfrDocument.disconnectedTFRId;
                          // var disconnectTFR = Document.readDoc("tfs.tfr", disconnectTFRId);
                          workflow.terminateProcessByOrderId(this.process.processOrder.tfrDocument.cwOrderId, "workflow.disconnectOrderProcess");
                        ]]></script>
                      </method>
                    </methodList>
                  </child>
                  <child name="prepareToCompleteNIDisconnectCancellation" type="opActivity">
                    <element>iface_workflow.facilityDesignTeamIF/oper_prepareToCompleteNIDiscCancellation</element>
                    <label>Prepare To Complete NI Disconnect Cancellation</label>
                    <participant>part_workflow.facilityDesignTeamParticipant</participant>
                    <x>190.55728</x>
                    <y>947.5613</y>
                  </child>
                  <child name="cancelCircuitDecision" type="choiceActivity">
                    <label>Cancel Circuit Decision</label>
                    <x>195.48103</x>
                    <y>1103.0671</y>
                    <childList>
                      <child name="xcNotRequired" type="opActivity">
                        <element>iface_workflow.facilityDesignTeamIF/oper_xcNotRequiredCancelDisconnect</element>
                        <label>XC Not Required</label>
                        <participant>part_workflow.facilityDesignTeamParticipant</participant>
                        <x>240.67555</x>
                        <y>1229.1707</y>
                        <methodList>
                          <method name="cwOnProcActAfter" type="action">
                            <category>script</category>
                            <system>true</system>
                            <script><![CDATA[
                              this.process.processOrder.tfrDocument.tfrStatus = configuration.getExternalNameForStatusByInternalName("NO CROSS-CONNECTION REQUIRED FOR CANCEL", "TFR");
                              this.process.processOrder.save();
                            ]]></script>
                          </method>
                        </methodList>
                      </child>
                      <child name="xcRequired" type="opActivity">
                        <element>iface_workflow.facilityDesignTeamIF/oper_xcRequiredCancelDisconnect</element>
                        <label>XC Required</label>
                        <participant>part_workflow.facilityDesignTeamParticipant</participant>
                        <x>139.97829</x>
                        <y>1229.1707</y>
                        <childList>
                          <child name="startCancellXCActivities" type="seqActivity">
                            <label>Start Cancell XC Activities</label>
                            <x>132.84099</x>
                            <y>1343.5132</y>
                            <childList>
                              <child name="cancelXC" type="opActivity">
                                <element>iface_workflow.xcTeamIF/oper_cancelXCForCancelDisconnect</element>
                                <label>Cancel XC</label>
                                <participant>part_workflow.xcTeamParticipant</participant>
                                <x>117.43709</x>
                                <y>1441.2144</y>
                              </child>
                              <child name="xcCancelled" type="opActivity">
                                <element>iface_workflow.xcTeamIF/oper_cancelledXCForCancelDisconnect</element>
                                <label>XC Cancelled</label>
                                <participant>part_workflow.xcTeamParticipant</participant>
                                <x>116.56833</x>
                                <y>1649.3179</y>
                                <methodList>
                                  <method name="cwOnProcActAfter" type="action">
                                    <category>script</category>
                                    <system>true</system>
                                    <script><![CDATA[
                                      this.process.processOrder.tfrDocument.tfrStatus = configuration.getExternalNameForStatusByInternalName("XC CANCELLED", "TFR");
                                      this.process.processOrder.save();
                                    ]]></script>
                                  </method>
                                </methodList>
                              </child>
                            </childList>
                          </child>
                        </childList>
                        <methodList>
                          <method name="cwOnProcActAfter" type="action">
                            <category>script</category>
                            <system>true</system>
                            <script><![CDATA[
                              this.process.processOrder.tfrDocument.tfrStatus = configuration.getExternalNameForStatusByInternalName("CROSS-CONNECTION REQUIRED FOR CANCEL", "TFR");
                              this.process.processOrder.save();
                            ]]></script>
                          </method>
                        </methodList>
                      </child>
                    </childList>
                  </child>
                  <child name="startCancellationAprovalActivities" type="seqActivity">
                    <label>Start Cancellation Approval Activities</label>
                    <x>171.78004</x>
                    <y>1769.0408</y>
                    <childList>
                      <child name="approveCancellation" type="opActivity">
                        <element>iface_workflow.orderInitiatorTeamIF/oper_approveDisconnectCancellation</element>
                        <label>Approve Cancellation</label>
                        <participant>part_workflow.installOrderInitiatorParticipant</participant>
                        <x>149.18257</x>
                        <y>1872.1226</y>
                      </child>
                      <child name="cancellationApproved" type="opActivity">
                        <element>iface_workflow.orderInitiatorTeamIF/oper_approvedCancellation</element>
                        <label>Cancellation Approved</label>
                        <participant>part_workflow.installOrderInitiatorParticipant</participant>
                        <x>160.06836</x>
                        <y>2124.3296</y>
                      </child>
                    </childList>
                    <methodList>
                      <method name="cwOnProcActBefore" type="action">
                        <category>before</category>
                        <system>true</system>
                        <script><![CDATA[debugPrintln("Starting Cancel Approval activities...");]]></script>
                      </method>
                    </methodList>
                  </child>
                  <child name="approvalPostSteps" type="scriptActivity">
                    <label>Approval Post Steps</label>
                    <x>164.06543</x>
                    <y>2235.732</y>
                    <methodList>
                      <method name="cwOnProcActBefore" type="action">
                        <category>before</category>
                        <system>true</system>
                        <script><![CDATA[
                          debugPrintln("Cancell Disconnect approval post steps...");

                          this.process.processOrder.tfrDocument.tfrStatus = configuration.getExternalNameForStatusByInternalName("CANCELLED", "TFR");
                          this.process.processOrder.tfrDocument.cancelledDate = new Date();
                          this.process.processOrder.tfrDocument.currentUserId = null;
                          this.process.processOrder.tfrDocument.currentUserDepartment = null;
                          this.process.processOrder.save();

                          debugPrintln("Finished Cancell Disconnect approval post steps.");
                        ]]></script>
                      </method>
                    </methodList>
                  </child>
                </childList>
              </child>
            </childList>
          </child>
          <child name="rejectCancellation" type="opActivity">
            <element>iface_workflow.facilityDesignTeamIF/oper_rejectDisconnectCancellation</element>
            <label>Reject Cancellation</label>
            <participant>part_workflow.facilityDesignTeamParticipant</participant>
            <x>34.34529</x>
            <y>695.35425</y>
            <childList>
              <child name="startRejectionAcknowledgeActivities" type="seqActivity">
                <label>Start Rejection Acknowledge Activities</label>
                <x>39.8783</x>
                <y>1340.573</y>
                <childList>
                  <child name="acknowledgeRejection" type="opActivity">
                    <element>iface_workflow.orderInitiatorTeamIF/oper_acknowledgeRejectCancellationOfDisconnect</element>
                    <label>Acknowledge Rejection</label>
                    <participant>part_workflow.installOrderInitiatorParticipant</participant>
                    <x>56.88154</x>
                    <y>1760.7202</y>
                  </child>
                  <child name="rejectionAcknowledged" type="opActivity">
                    <element>iface_workflow.orderInitiatorTeamIF/oper_acknowledgedRejection</element>
                    <label>Rejection Acknowledged</label>
                    <participant>part_workflow.installOrderInitiatorParticipant</participant>
                    <x>30.0</x>
                    <y>2124.3296</y>
                    <methodList>
                      <method name="cwOnProcActAfter" type="action">
                        <category>script</category>
                        <system>true</system>
                        <script>workflow.resumeWorkItemsForOrder(this.process.processOrder.id, this.process.id);</script>
                      </method>
                    </methodList>
                  </child>
                </childList>
              </child>
            </childList>
          </child>
        </childList>
      </child>
      <child name="postSteps" type="scriptActivity">
        <label>Cancel Disconnect Poststeps</label>
        <x>101.38086</x>
        <y>2347.1343</y>
        <methodList>
          <method name="cwOnProcActBefore" type="action">
            <category>before</category>
            <system>true</system>
            <script><![CDATA[
              debugPrintln("Cancel disconnect poststeps...");

              debugPrintln("Cancel disconnect poststeps completed.");
            ]]></script>
          </method>
        </methodList>
      </child>
      <child name="End" type="completeActivity">
        <label>End</label>
        <x>115.06152</x>
        <y>2473.2378</y>
        <methodList>
          <method name="cwOnProcActBefore" type="action">
            <category>before</category>
            <system>true</system>
            <script><![CDATA[debugPrintln("Cancell Disconnect order process completed.");]]></script>
          </method>
        </methodList>
      </child>
      <child name="facilityDesignTeamParticipant" type="participantActivity">
        <label>Facility Design Team Participant</label>
        <participant>part_workflow.facilityDesignTeamParticipant</participant>
        <x>169.76328</x>
        <y>368.14722</y>
      </child>
      <child name="installOrderInitiatorParticipant" type="participantActivity">
        <label>Install Order Initiator Participant</label>
        <participant>part_workflow.installOrderInitiatorParticipant</participant>
        <x>74.061516</x>
        <y>1983.5249</y>
      </child>
      <child name="xcTeamParticipant" type="participantActivity">
        <label>XC Team Participant</label>
        <participant>part_workflow.xcTeamParticipant</participant>
        <x>128.75192</x>
        <y>1537.9155</y>
      </child>
    </childList>
    <methodList>
      <method name="cwOnProcActBefore" type="action">
        <category>before</category>
        <system>true</system>
        <script><![CDATA[debugPrintln("Starting Cancell Disconnect Order process...");]]></script>
      </method>
    </methodList>
  </activity>
  <curRevision>true</curRevision>
  <document>doc_com.conceptwave.system.Document</document>
  <label>Cancel Disconnect Order Process</label>
  <metaVersion>25</metaVersion>
  <priority>8</priority>
  <type>User</type>
</process>