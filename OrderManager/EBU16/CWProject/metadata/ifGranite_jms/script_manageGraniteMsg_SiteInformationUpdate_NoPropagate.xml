<?xml version="1.0" encoding="UTF-8" ?>
<script name="ifGranite_jms.manageGraniteMsg_SiteInformationUpdate_NoPropagate">
  <label>Manage Granite Message: Site Information Update [JMS] # NO PROPAGATE TO CRM-D</label>
  <metaVersion>25</metaVersion>
  <parameterList>
    <parameter name="input" type="rifp">
      <type>nmeta_com.conceptwave.system.Object</type>
    </parameter>
  </parameterList>
  <script><![CDATA[
    var debug = "[MANAGE GRANITE MESSAGE VIA 'JMS': SITE INFORMATION UPDATE # NO PROPAGATE] ";
    debugPrintln("[" + common.common_currentDateAsStringDDMMYYYYHH24MISS() + "]" + debug + "START...");
    debugPrintln("[" + common.common_currentDateAsStringDDMMYYYYHH24MISS() + "]" + debug + "INPUT: " + (input != null ? input.toXML() : "") + "...");

    if (input != null) {

        var logDoc = UserProfile.getMsgLogDoc();

        var siuEventStorage = new Document("ds_ws.SIUEventStorage");
        siuEventStorage.eventId = logDoc.messageID;
        siuEventStorage.plateId = input.ccliCode;
        siuEventStorage.siteId = input.siteID;
        siuEventStorage.eventXMLData = input.toXML();
        siuEventStorage.eventDate = new Date();
        siuEventStorage.eventDateTime = new Date();

        siuEventStorage.save();

    }
    debugPrintln("[" + common.common_currentDateAsStringDDMMYYYYHH24MISS() + "]" + debug + "END...");
  ]]></script>
</script>