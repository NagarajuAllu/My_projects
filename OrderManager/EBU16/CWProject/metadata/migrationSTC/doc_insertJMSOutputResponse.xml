<?xml version="1.0" encoding="UTF-8" ?>
<document name="migrationSTC.insertJMSOutputResponse">
  <extends>doc_com.conceptwave.system.Document</extends>
  <guid>{0de00bf6-5df1-1379-ab47-6c7dce531081}</guid>
  <label>Insert JMSOutput Response</label>
  <metaVersion>21</metaVersion>
  <skipSchemaGeneration>true</skipSchemaGeneration>
  <variableList>
    <variable name="errorCode" type="leaf">
      <label>ErrorCode</label>
      <propertyElement type="elfld">
        <label>Error Code</label>
      </propertyElement>
      <valueType>dtype_ds_ws.string100</valueType>
    </variable>
    <variable name="errorDescription" type="leaf">
      <label>ErrorDescription</label>
      <propertyElement type="elfld">
        <label>Error Description</label>
      </propertyElement>
      <valueType>dtype_ds_ws.string100</valueType>
    </variable>
    <variable name="errorTime" type="leaf">
      <label>ErrorTime</label>
      <propertyElement type="elfld">
        <label>Error Time</label>
      </propertyElement>
      <valueType>dtype_ds_ws.string100</valueType>
    </variable>
    <variable name="errorType" type="leaf">
      <label>ErrorType</label>
      <propertyElement type="elfld">
        <label>Error Type</label>
      </propertyElement>
      <valueType>dtype_ds_ws.string100</valueType>
    </variable>
    <variable name="systemName" type="leaf">
      <label>SystemName</label>
      <propertyElement type="elfld">
        <label>System Name</label>
      </propertyElement>
      <valueType>dtype_ds_ws.string100</valueType>
    </variable>
    <variable name="status" type="leaf">
      <label>Status</label>
      <propertyElement type="elfld">
        <label>Status</label>
        <optional type="varPath">
          <variablePathList>
            <variablePath>dtype_com.conceptwave.system.Boolean/leaf_FALSE</variablePath>
          </variablePathList>
        </optional>
      </propertyElement>
      <valueType>dtype_ds_jms.orderStatus</valueType>
    </variable>
    <variable name="crmOrderNumber" type="leaf">
      <label>OrderNumber</label>
      <propertyElement type="elfld">
        <label>CRM Order Number</label>
        <optional type="varPath">
          <variablePathList>
            <variablePath>dtype_com.conceptwave.system.Boolean/leaf_FALSE</variablePath>
          </variablePathList>
        </optional>
      </propertyElement>
      <valueType>dtype_ds_ws.string50</valueType>
    </variable>
    <variable name="xngOrderNumber" type="leaf">
      <label>XngOrderNumber</label>
      <propertyElement type="elfld">
        <label>Xng Order Number</label>
      </propertyElement>
      <valueType>dtype_ds_ws.string50</valueType>
    </variable>
    <variable name="lineItemIdentifier" type="leaf">
      <propertyElement type="elfld">
        <label>LineItem Identifier</label>
        <optional type="varPath">
          <variablePathList>
            <variablePath>dtype_com.conceptwave.system.Boolean/leaf_FALSE</variablePath>
          </variablePathList>
        </optional>
      </propertyElement>
      <valueType>dtype_ds_ws.string255</valueType>
    </variable>
    <variable name="workOrderNumber" type="leaf">
      <label>XngOrderNumber</label>
      <propertyElement type="elfld">
        <label>WorkOrder Number</label>
      </propertyElement>
      <valueType>dtype_ds_ws.string50</valueType>
    </variable>
  </variableList>
  <UserInterface name="UserInterface" type="ui">
    <extends>doc_com.conceptwave.system.Document/ui_UserInterface</extends>
    <variableList>
      <variable name="model" type="uivar">
        <label>model</label>
        <valueType>doc_migrationSTC.insertJMSOutputResponse</valueType>
      </variable>
    </variableList>
    <vformList>
      <vform name="Forms" type="frmui">
        <extends>doc_com.conceptwave.system.Document/ui_UserInterface/frmui_Forms</extends>
        <overlayList>
          <overlay name="Default" type="exov">
            <base>ui_com.conceptwave.system.DocumentUserInterface/frmui_Forms/exov_Default</base>
            <extends>ui_com.conceptwave.system.DocumentUserInterface/frmui_Forms/exov_Default</extends>
            <label>Default</label>
            <overrideList>
              <override name="defaultGrid_vCentering" type="elvltstck">
                <height>100%</height>
                <membersMargin>5</membersMargin>
                <width>100%</width>
                <elementList>
                  <element name="insertJMSOutputResponseHeader" type="elhdr">
                    <label>Insert JMS Response</label>
                    <showValidation>true</showValidation>
                    <style>CwFOT</style>
                  </element>
                  <element name="insertJMSOutputResponseHeader1" type="elhdr">
                    <label>OrderAcknowledgement Data</label>
                  </element>
                  <element name="groupGrid" type="elgrd">
                    <colWidths>120px,224px,120px,224px</colWidths>
                    <labelOrientation>left</labelOrientation>
                    <numOfCols>4</numOfCols>
                    <style>fittedSimpleBorder</style>
                    <useDefaultHeight>true</useDefaultHeight>
                    <width>688px</width>
                    <elementList>
                      <element name="crmOrderNumber" type="elfld">
                        <columnSpan>1</columnSpan>
                        <optional type="varPath">
                          <variablePathList>
                            <variablePath>dtype_com.conceptwave.system.Boolean/leaf_FALSE</variablePath>
                          </variablePathList>
                        </optional>
                        <variable type="varPath">
                          <variablePathList>
                            <variablePath>doc_migrationSTC.insertJMSOutputResponse/ui_UserInterface/uivar_model</variablePath>
                            <variablePath>doc_migrationSTC.insertJMSOutputResponse/leaf_crmOrderNumber</variablePath>
                          </variablePathList>
                        </variable>
                      </element>
                      <element name="lineItemIdentifier" type="elfld">
                        <columnSpan>1</columnSpan>
                        <variable type="varPath">
                          <variablePathList>
                            <variablePath>doc_migrationSTC.insertJMSOutputResponse/ui_UserInterface/uivar_model</variablePath>
                            <variablePath>doc_migrationSTC.insertJMSOutputResponse/leaf_lineItemIdentifier</variablePath>
                          </variablePathList>
                        </variable>
                      </element>
                      <element name="xngOrderNumber" type="elfld">
                        <columnSpan>1</columnSpan>
                        <variable type="varPath">
                          <variablePathList>
                            <variablePath>doc_migrationSTC.insertJMSOutputResponse/ui_UserInterface/uivar_model</variablePath>
                            <variablePath>doc_migrationSTC.insertJMSOutputResponse/leaf_xngOrderNumber</variablePath>
                          </variablePathList>
                        </variable>
                      </element>
                      <element name="workOrderNumber" type="elfld">
                        <columnSpan>1</columnSpan>
                        <variable type="varPath">
                          <variablePathList>
                            <variablePath>doc_migrationSTC.insertJMSOutputResponse/ui_UserInterface/uivar_model</variablePath>
                            <variablePath>doc_migrationSTC.insertJMSOutputResponse/leaf_workOrderNumber</variablePath>
                          </variablePathList>
                        </variable>
                      </element>
                      <element name="status" type="elslct">
                        <columnSpan>1</columnSpan>
                        <labelOrientation>left</labelOrientation>
                        <variable type="varPath">
                          <variablePathList>
                            <variablePath>doc_migrationSTC.insertJMSOutputResponse/ui_UserInterface/uivar_model</variablePath>
                            <variablePath>doc_migrationSTC.insertJMSOutputResponse/leaf_status</variablePath>
                          </variablePathList>
                        </variable>
                      </element>
                    </elementList>
                  </element>
                  <element name="LayoutSpacer" type="ellsp">
                    <height>20px</height>
                  </element>
                  <element name="insertJMSOutputResponseHeader2" type="elhdr">
                    <label>Failure Data</label>
                  </element>
                  <element name="groupGridFailure" type="elgrd">
                    <colWidths>120px,224px,120px,224px</colWidths>
                    <labelOrientation>left</labelOrientation>
                    <numOfCols>4</numOfCols>
                    <style>fittedSimpleBorder</style>
                    <useDefaultHeight>true</useDefaultHeight>
                    <width>688px</width>
                    <elementList>
                      <element name="errorCode" type="elfld">
                        <columnSpan>1</columnSpan>
                        <variable type="varPath">
                          <variablePathList>
                            <variablePath>doc_migrationSTC.insertJMSOutputResponse/ui_UserInterface/uivar_model</variablePath>
                            <variablePath>doc_migrationSTC.insertJMSOutputResponse/leaf_errorCode</variablePath>
                          </variablePathList>
                        </variable>
                      </element>
                      <element name="errorDescription" type="elfld">
                        <columnSpan>1</columnSpan>
                        <variable type="varPath">
                          <variablePathList>
                            <variablePath>doc_migrationSTC.insertJMSOutputResponse/ui_UserInterface/uivar_model</variablePath>
                            <variablePath>doc_migrationSTC.insertJMSOutputResponse/leaf_errorDescription</variablePath>
                          </variablePathList>
                        </variable>
                      </element>
                      <element name="errorTime" type="elfld">
                        <columnSpan>1</columnSpan>
                        <variable type="varPath">
                          <variablePathList>
                            <variablePath>doc_migrationSTC.insertJMSOutputResponse/ui_UserInterface/uivar_model</variablePath>
                            <variablePath>doc_migrationSTC.insertJMSOutputResponse/leaf_errorTime</variablePath>
                          </variablePathList>
                        </variable>
                      </element>
                      <element name="errorType" type="elfld">
                        <columnSpan>1</columnSpan>
                        <variable type="varPath">
                          <variablePathList>
                            <variablePath>doc_migrationSTC.insertJMSOutputResponse/ui_UserInterface/uivar_model</variablePath>
                            <variablePath>doc_migrationSTC.insertJMSOutputResponse/leaf_errorType</variablePath>
                          </variablePathList>
                        </variable>
                      </element>
                      <element name="systemName" type="elfld">
                        <columnSpan>1</columnSpan>
                        <variable type="varPath">
                          <variablePathList>
                            <variablePath>doc_migrationSTC.insertJMSOutputResponse/ui_UserInterface/uivar_model</variablePath>
                            <variablePath>doc_migrationSTC.insertJMSOutputResponse/leaf_systemName</variablePath>
                          </variablePathList>
                        </variable>
                      </element>
                    </elementList>
                  </element>
                </elementList>
              </override>
            </overrideList>
          </overlay>
          <overlay name="Menu" type="exov">
            <base>doc_com.conceptwave.system.Document/ui_UserInterface/frmui_Forms/exov_Menu</base>
            <extends>doc_com.conceptwave.system.Document/ui_UserInterface/frmui_Forms/exov_Menu</extends>
            <label>Menu</label>
            <overrideList>
              <override name="hl1" type="elext">
                <elementList>
                  <element name="sendDataLikeJMSResponse" type="elmnu">
                    <clickMethod type="varPath">
                      <variablePathList>
                        <variablePath>doc_migrationSTC.insertJMSOutputResponse/ui_UserInterface/usrActionMethod_sendDataLikeJMSResponse_menu</variablePath>
                      </variablePathList>
                    </clickMethod>
                    <label>Send Data Like JMS Response</label>
                    <menuType>5</menuType>
                    <showDown>true</showDown>
                    <showRollOver>true</showRollOver>
                  </element>
                </elementList>
              </override>
            </overrideList>
          </overlay>
        </overlayList>
      </vform>
    </vformList>
    <methodList>
      <method name="runTrigger" type="usrActionMethod">
        <script><![CDATA[
          this.cw$super_runTrigger();
          Global.runContentDisplayScript(this, "displayScript");
        ]]></script>
      </method>
      <method name="sendDataLikeJMSResponse" type="usrActionMethod">
        <autosave>true</autosave>
        <confirmation>doc_migrationSTC.insertJMSOutputResponse/ui_UserInterface/action_sendDataLikeJMSResponse_confirm</confirmation>
        <script><![CDATA[
          var document = this.model;
          var jmsResponse = new DataStructure("ds_jms.orderAcknowledgementWithFailure_el");

          if(document.status != "Accepted") {
              var failure = new DataStructure("ds_jms.orderFailure");
              failure.errorCode = document.errorCode;
              failure.errorDescription = document.errorDescription;
              failure.errorTime = document.errorTime;
              failure.errorType = document.errorType;
              failure.systemName = document.systemName;

              jmsResponse.failure[0] = failure;
          }

          jmsResponse.workOrderNumber = document.workOrderNumber;
          jmsResponse.crmOrderNumber = document.crmOrderNumber;
          jmsResponse.lineItemIdentifier = document.lineItemIdentifier;
          jmsResponse.status = document.status;
          jmsResponse.xngOrderNumber = document.xngOrderNumber;

          ifGranite_jms.manageGraniteMsg_SubmitUpdateOrderResponse(jmsResponse);

          Global.showUserMessage("Data sent to Expediter");
        ]]></script>
      </method>
      <method name="sendDataLikeJMSResponse_confirm" type="action">
        <script><![CDATA[return "AW0004";]]></script>
      </method>
      <method name="sendDataLikeJMSResponse_menu" type="usrActionMethod">
        <allowInvalidObject>true</allowInvalidObject>
        <validate>true</validate>
        <script><![CDATA[
          if (!this.isValid) {
            var messages = this.validationErrors == null ? null : this.validationErrors.getErrorsAsString(10);
            if (messages == null)
              Global.throwException("UU0129", this);
            else
              Global.throwException("UU0147", "<br>" + messages);
          }
          var result = this.sendDataLikeJMSResponse();
          Global.runContentDisplayScript(this, "displayScript");
          return result;
        ]]></script>
      </method>
      <method name="onValidate" type="action">
        <valueType>dtype_com.conceptwave.system.Boolean</valueType>
        <script><![CDATA[
          var result = this.cw$super_onValidate();
          if(result) {
              if(this.model.status == "Accepted") {
                  result = (this.model.xngOrderNumber != null && this.model.workOrderNumber != null);
              }
              else {
                  result = (this.model.errorCode != null && this.model.errorDescription != null);
              }
          }
        ]]></script>
      </method>
    </methodList>
  </UserInterface>
</document>