<?xml version="1.0" encoding="UTF-8" ?>
<script name="processSTC.generateDummyWOSUForFailedOrderToGranite">
  <label>Generate Dummy WOSU For FailedOrder To Granite</label>
  <metaVersion>4</metaVersion>
  <parameterList>
    <parameter name="crmOrderNumber" type="rifp">
      <type>dtype_com.conceptwave.system.String</type>
    </parameter>
    <parameter name="lineItemFailed" type="rifp">
      <type>doc_ds_ws.lineItemDocument</type>
    </parameter>
  </parameterList>
  <script><![CDATA[
    var jmsWOSU_ds = new DataStructure("ds_jms.workOrderStatusUpdate_el");
    jmsWOSU_ds.workOrderNumber = lineItemFailed.workOrderNumber;
    jmsWOSU_ds.crmOrderNumber = crmOrderNumber;
    jmsWOSU_ds.serviceNumber = lineItemFailed.workOrderNumber;
    jmsWOSU_ds.businessUnit = "Enterprise";
    jmsWOSU_ds.workOrderStatus = "FAILED";
    jmsWOSU_ds.workOrderRemarks = "Dummy WOSU generated by OM for FAILED lineItem; " + lineItemFailed.remarks;
    jmsWOSU_ds.taskName = "no-info";
    jmsWOSU_ds.taskNumber = "-1";
    jmsWOSU_ds.taskOperation = "no-info";
    jmsWOSU_ds.taskStatusCode = "FAILED";
    jmsWOSU_ds.serviceStatus = "FAILED";

    var orderHeader = ds_ws.getBundleOrderByOrderNumber(crmOrderNumber);
    if(orderHeader != null) {
        jmsWOSU_ds.fulfillmentMode = (orderHeader.orderType == "F" ? "Feasibility" : null);
    }

    ifGranite_jms.manageGraniteMsg_WorkOrderStatusUpdate(jmsWOSU_ds);
  ]]></script>
</script>