<?xml version="1.0" encoding="UTF-8" ?>
<script filenameHash="9c6e26c5165c83945f8fc90cacf05743" versionHash="a87ff679a2f3e71d9181a67b7542122c" name="ds_ws.checkSameValueForNVInOrders">
  <label>Check Same Value for NV Pairs In Orders</label>
  <metaVersion>4</metaVersion>
  <parameterList>
    <parameter name="orders" type="rifp">
      <array>true</array>
      <type>order_ds_ws.default_orderSTC_HOME</type>
    </parameter>
    <parameter name="nvPairToCheck" type="rifp">
      <type>dtype_com.conceptwave.system.String</type>
    </parameter>
    <parameter name="firstValueFound" type="rifp">
      <type>dtype_com.conceptwave.system.String</type>
    </parameter>
  </parameterList>
  <script><![CDATA[
    var sameValueFound = true;

    for (var s = 0; s < orders.length; s++) {
        if(orders[s].serviceParametersList != null) {
            for (var p = 0; p < orders[s].serviceParametersList.length; p++) {
                if(orders[s].serviceParametersList[p].nameValueList != null) {
                    for (var n =0; n < orders[s].serviceParametersList[p].nameValueList.length; n++) {
                        var nvPairName = orders[s].serviceParametersList[p].nameValueList[n].nameValue.name;
                        var nvPairValue = orders[s].serviceParametersList[p].nameValueList[n].nameValue.value;
                        if(nvPairName == nvPairToCheck) {
                            if(! ds_ws.common_isNullValue(nvPairValue)) {
                                if(sameValueFound) {
                                    sameValueFound = (nvPairValue == firstValueFound);
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    return sameValueFound;
  ]]></script>
</script>