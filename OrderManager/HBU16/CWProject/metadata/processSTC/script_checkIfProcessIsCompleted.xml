<?xml version="1.0" encoding="UTF-8" ?>
<script name="processSTC.checkIfProcessIsCompleted">
  <label>Check If Process Is Completed</label>
  <metaVersion>3</metaVersion>
  <parameterList>
    <parameter name="pid" type="rifp">
      <type>dtype_cwf_pm.PROCESS_ID</type>
    </parameter>
  </parameterList>
  <script><![CDATA[
    var processCompleted = false;

    var debug = " checkIfProcessIsCompleted - "

    var inputDocForQuery = new Document("cwf_pm:ProcessSearch");
    inputDocForQuery.PROCESS_ID = pid;

    var processFinder = Finder.runFinder("cwf_pm:ProcessFinder", "select",  inputDocForQuery);
    if (processFinder != null && processFinder.size > 0) {
    debugPrintln("[" + ds_ws.common_currentDateAsStringDDMMYYYYHH24MISS() + "]" + debug + "ProcessStatus [" + pid + "] = " + processFinder.start.STATUS);
                processCompleted = (processFinder.start.STATUS == 3 || processFinder.start.STATUS == 6);
          }
          else {
    debugPrintln("[" + ds_ws.common_currentDateAsStringDDMMYYYYHH24MISS() + "]" + debug + "Unable to find Process with pid " + pid);
                processCompleted = false;
          }

          return processCompleted;
  ]]></script>
</script>