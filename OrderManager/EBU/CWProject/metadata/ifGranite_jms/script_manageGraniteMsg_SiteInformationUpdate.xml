<?xml version="1.0" encoding="UTF-8" ?>
<script filenameHash="9271365c5ee2feac145019b0301b7af0" versionHash="eccbc87e4b5ce2fe28308fd9f2a7baf3" name="ifGranite_jms.manageGraniteMsg_SiteInformationUpdate">
  <guid>{02409c4f-4f76-a277-7e2c-90dcfeb9334a}</guid>
  <label>Manage Granite Message: Site Information Update [JMS]</label>
  <metaVersion>3</metaVersion>
  <parameterList>
    <parameter name="input" type="rifp">
      <type>nmeta_com.conceptwave.system.Object</type>
    </parameter>
  </parameterList>
  <script><![CDATA[
    var debug = "[MANAGE GRANITE MESSAGE VIA 'JMS': SITE INFORMATION UPDATE] ";
    debugPrintln("[" + common.common_currentDateAsStringDDMMYYYYHH24MISS() + "]" + debug + "START...");
    debugPrintln("[" + common.common_currentDateAsStringDDMMYYYYHH24MISS() + "]" + debug + "INPUT: " + (input != null ? input.toXML() : "") + "...");

          if (input != null) {

                var inputSOAP = new DataStructure("ifEAI_SIU_17122008:receiveRequest_el");
                var outputSOAP = null;

                // - mapping the input JMS message vs. input SOAP message
                inputSOAP.SiteInformationUpdate.BusinessUnit = input.businessUnit;
                inputSOAP.SiteInformationUpdate.PlateID = input.ccliCode;
                inputSOAP.SiteInformationUpdate.City = input.city;
                inputSOAP.SiteInformationUpdate.Country = input.country;
                inputSOAP.SiteInformationUpdate.District = input.district;
                inputSOAP.SiteInformationUpdate.Region = input.region;
                inputSOAP.SiteInformationUpdate.SiteID = input.siteID;
                inputSOAP.SiteInformationUpdate.SiteName = input.siteName;
                inputSOAP.SiteInformationUpdate.SiteType = input.siteType;
                inputSOAP.SiteInformationUpdate.Status = input.status;
                inputSOAP.SiteInformationUpdate.POBox = "";                                                // TO BE MAPPED....
                // Modified on 24.02.2009:
                // - added three new fields: CityCode, DistrictCode, ExchangeCode
                inputSOAP.SiteInformationUpdate.CityCode = input.cityCode;
                inputSOAP.SiteInformationUpdate.DistrictCode = input.districtCode;
                inputSOAP.SiteInformationUpdate.ExchangeCode = input.exchangeCode;

                if (input.unitNumber != null && input.unitNumber.length > 0) {
                      for (var j = 0; j < input.unitNumber.length; j++) {
                            inputSOAP.SiteInformationUpdate.UnitNumbers.ArrayOfstringItem[j] = input.unitNumber[j];
                      }
                }

                try {
    debugPrintln("[" + common.common_currentDateAsStringDDMMYYYYHH24MISS() + "]" + debug + "INVOKING INTERFACE...");
                      outputSOAP = ifEAI_SIU_17122008.invokeEAIIF_SiteInformationUpdate(inputSOAP);
    debugPrintln("[" + common.common_currentDateAsStringDDMMYYYYHH24MISS() + "]" + debug + "RESULT: " +
                       (outputSOAP != null && outputSOAP.length == 1 ?
                        outputSOAP[0].toXML() : "") + "...");
                }
                catch (exc){
    debugPrintln("[" + common.common_currentDateAsStringDDMMYYYYHH24MISS() + "]" + debug + "EXCEPTION: " + exc);
                }
          }
          else{
    debugPrintln("[" + common.common_currentDateAsStringDDMMYYYYHH24MISS() + "]" + debug + "- WARNING - INTERFACE NOT INVOKED: INPUT IS NULL...");
          }
    debugPrintln("[" + common.common_currentDateAsStringDDMMYYYYHH24MISS() + "]" + debug + "END...");
  ]]></script>
</script>